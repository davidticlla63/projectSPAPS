<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

	<ui:define name="head">
		<h:outputScript name="js/maps.js" library="olympos-layout" />
		<style type="text/css">
.ui-datatable-reflow .ui-datatable-data .ui-expanded-row-content thead .ui-column-title
	{
	display: inline;
}
</style>
	</ui:define>

	<ui:define name="content">

		<h:form id="form001">

			<!-- top buttons-->
			<div class="Container100">

				<div class="Container100 Responsive100 TexAlLeft">
					<p:panel header="Busqueda" toggleable="true" collapsed="true">

						<div class="Container60 Responsive100 TexAlLeft">
							<div class="Container20 Responsive100 TexAlLef">
								<p:outputLabel for="tipoBusqueda" value="Buscar por:" />
							</div>
							<div class="Container80 Responsive100 TexAlLef">
								<p:selectOneRadio id="tipoBusqueda" style="align:left;"
									immediate="true" value="#{pacienteController.tipoBusqueda}">
									<p:ajax update="tipoBusqueda, busqueda" />
									<f:selectItem itemLabel="Nombre de Paciente" itemValue="NP" />
									<f:selectItem itemLabel="Codigo de Paciente" itemValue="CP" />
									<f:selectItem itemLabel="Codigo de Historia Clinica"
										itemValue="CH" />
									<f:selectItem itemLabel="Documento de Identidad" itemValue="DI" />
								</p:selectOneRadio>
								<p:message for="tipoBusqueda" display="tooltip" />
							</div>
						</div>

						<div class="Container60 Responsive100 ui-fluid TexAlLeft">
							<div
								class="Container20 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
								<p:outputLabel for="busqueda" value="Paciente:" />
							</div>
							<div class="Container50 Responsive50 TexAlRight">
								<p:autoComplete id="busqueda"
									value="#{pacienteController.pacienteSelected}"
									completeMethod="#{pacienteController.onCompleteFind}"
									converter="pacienteConverter" minQueryLength="1"
									forceSelection="true" var="_var"
									itemLabel="#{_var.nombre} #{_var.apellidoPaterno} #{_var.apellidoMaterno}"
									itemValue="#{_var}"
									placeholder="Escriba el criterio de busqueda" maxResults="10"
									dropdown="true">
									<p:ajax event="itemSelect" immediate="true" update="form001"
										listener="#{pacienteController.onSelectPacienteClick}" />
									<p:column>
										<h:outputText
											value="#{_var.nombre} #{_var.apellidoPaterno} #{_var.apellidoMaterno}" />
									</p:column>
								</p:autoComplete>
								<p:message for="busqueda" display="tooltip" />
							</div>
						</div>

					</p:panel>
				</div>
				<div class="Card">
					<div class="Container75 Responsive100 TexAlLeft">
						<p:commandButton type="button" icon="fa fa-plus"
							oncomplete="window.location.reload()"
							rendered="#{pacienteController.crear}"
							styleClass="Fs14 White GreenButton" value="Nuevo Paciente">
							<p:ajax update="form001"
								listener="#{pacienteController.actionNuevo()}" />
						</p:commandButton>

						<p:commandButton type="button" icon="fa fa-arrow-left"
							oncomplete="window.location.reload()"
							rendered="#{pacienteController.registrar or pacienteController.modificar}"
							value="Cancelar" styleClass="Fs14 White OrangeButton">
							<p:ajax update="form001"
								listener="#{pacienteController.actionCancelar()}" />
						</p:commandButton>

						<p:commandButton icon="fa fa-floppy-o"
							rendered="#{pacienteController.registrar}"
							styleClass="Fs14 White GreenButton" value="Registrar"
							update="form001"
							actionListener="#{pacienteController.registrar()}">
						</p:commandButton>

						<p:commandButton type="button" icon="fa fa-edit"
							rendered="#{pacienteController.modificar}" value="Modificar"
							styleClass="Fs14 White BlueButton">
							<p:ajax update="form001"
								listener="#{pacienteController.actualizar()}" />
						</p:commandButton>

						<p:commandButton type="button" icon="fa fa-trash-o"
							oncomplete="window.location.reload()"
							rendered="#{pacienteController.modificar}" value="Eliminar"
							styleClass="Fs14 White RedButton">
							<p:ajax update="form001"
								listener="#{pacienteController.eliminar()}" />
						</p:commandButton>
					</div>
					<div class="Container25 Responsive100 TexAlRight">
						<p:breadCrumb>
							<p:menuitem value="."
								url="#{request.contextPath}/dashboard.xhtml" />
							<p:menuitem value="Seguridad"
								url="#{request.contextPath}/pages/security/user.xhtml" />
							<p:menuitem value="Individuo"
								url="#{request.contextPath}/pages/security/user.xhtml" />
						</p:breadCrumb>
					</div>
				</div>
			</div>

			<!-- center boxes -->
			<div class="Container100 NoIndent Flex FlexWrap">
				<ui:fragment
					rendered="#{pacienteController.modificar or pacienteController.registrar}">
					<div class="Container100 Responsive100 Flex">
						<div class="Card">
							<div class="CardBigTopic">INFORMACION DEL PACIENTE</div>
							<div class="SeparatorFull"></div>
							<div class="Container100 ui-fluid">

								<div class="Container100 Responsive100 TexAlLeft">
									<p:focus for="nombre" />
									<div class="Container33 Responsive100 TexAlLeft">
										<div
											class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
											<p:outputLabel for="codigo" value="Codigo" />
										</div>
										<div class="Container70 Responsive50 ">
											<p:inputText id="codigo" readonly="true"
												value="#{pacienteController.paciente.codigo}">
												<p:ajax update="codigo" />
											</p:inputText>
											<p:message for="codigo" display="tooltip" />
										</div>
									</div>

									<div class="Container33 Responsive100 TexAlLeft">
										<div
											class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80">
											<p:outputLabel for="tipoAtencion" value="Tipo de Afiliacion:" />
										</div>
										<div class="Container70 Responsive50">
											<p:selectOneRadio id="tipoAtencion" immediate="true"
												required="true"
												requiredMessage="Seleccione el tipo de afiliacion del paciente por favor"
												value="#{pacienteController.paciente.tipoAfiliacion}">
												<p:ajax render="datosSeguro" update="codigo, form001" />
												<f:selectItem itemLabel="Particular" itemValue="P" />
												<f:selectItem itemLabel="Asegurado" itemValue="S" />
												<f:selectItem itemLabel="Empresa" itemValue="E" />
											</p:selectOneRadio>
											<p:message for="tipoAtencion" display="tooltip" />
										</div>
									</div>

								</div>

								<div class="Container100 Responsive100 ui-fluid TexAlLeft">

									<div class="Container100 Responsive100 TexAlLeft">
										<p:panel header="Datos Personales" toggleable="true"
											collapsed="false">

											<div class="Container33 Responsive100">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="nombre" value="Nombre" />
												</div>
												<div class="Container70 Responsive50 ">
													<p:inputText id="nombre" required="true"
														requiredMessage="Ingrese el nombre del paciente por favor."
														value="#{pacienteController.paciente.nombre}">
														<p:ajax event="change" update="nombre" />
													</p:inputText>
													<p:message for="nombre" display="tooltip" />
												</div>
											</div>

											<div class="Container33 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="apellidoPaterno"
														value="Apellido Paterno" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:inputText id="apellidoPaterno" required="true"
														requiredMessage="Ingrese el apellido paterno del paciente por favor."
														value="#{pacienteController.paciente.apellidoPaterno}">
														<p:ajax event="change" update="apellidoPaterno" />
													</p:inputText>
													<p:message for="apellidoPaterno" display="tooltip" />
												</div>
											</div>

											<div class="Container33 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="apellidoMaterno"
														value="Apellido Materno" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:inputText id="apellidoMaterno"
														value="#{pacienteController.paciente.apellidoMaterno}">
														<p:ajax event="change" update="apellidoMaterno" />
													</p:inputText>
													<p:message for="apellidoMaterno" display="tooltip" />
												</div>
											</div>

											<div class="Container33 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="fechaNacimiento"
														value="Fecha de Nacimiento" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:calendar id="fechaNacimiento" navigator="true"
														required="true"
														requiredMessage="Ingrese la fecha de nacimiento del paciente por favor."
														effect="fold"
														value="#{pacienteController.paciente.fechaNacimiento}"
														pattern="dd-MM-yyyy" mask="true">
														<p:ajax event="change" update="fechaNacimiento, edad"
															listener="#{pacienteController.calcularEdad}" />
														<p:ajax event="dateSelect" update="fechaNacimiento, edad"
															listener="#{pacienteController.calcularEdad}" />
													</p:calendar>
													<p:message for="fechaNacimiento" display="tooltip" />
												</div>
											</div>

											<div class="Container33 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="edad" value="Edad" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:inputText id="edad"
														value="#{pacienteController.paciente.edad}">
														<p:ajax event="change" update="edad" />
													</p:inputText>
													<p:message for="edad" display="tooltip" />
												</div>
											</div>

											<div class="Container33 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="sexo" value="Sexo" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:selectOneRadio id="sexo" immediate="true"
														required="true"
														requiredMessage="Ingrese el sexo del paciente por favor."
														value="#{pacienteController.paciente.sexo}"
														valueChangeListener="#{pacienteController.selectSexo}">
														<f:selectItems
															value="#{pacienteController.paciente.getSexos()}" var="v"
															itemLabel="#{v.label}" itemValue="#{v}" />
														<p:ajax update="sexo" />
													</p:selectOneRadio>
													<p:message for="sexo" display="tooltip" />
												</div>
											</div>

											<div class="Container33 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="telefono" value="Telefono" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:inputText id="telefono" immediate="true"
														value="#{pacienteController.paciente.telefono}">
														<p:ajax update="telefono" />
													</p:inputText>
													<p:message id="msgTelefono" for="telefono"
														display="tooltip" />
												</div>
											</div>

											<div class="Container33 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="email" value="Correo:" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:inputText id="email" required="false"
														value="#{pacienteController.paciente.correo}"
														validatorMessage="Correo Electrónico no válido">
														<p:ajax event="change" />
													</p:inputText>
													<p:message for="email" display="tooltip" />
												</div>
											</div>

											<div class="Container33 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="estadoCivil" value="Estado Civil:" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:autoComplete id="estadoCivil"
														value="#{pacienteController.nombreEstadoCivil}"
														completeMethod="#{pacienteController.onCompleteEstadoCivil}"
														minQueryLength="1" forceSelection="true" var="_var"
														itemLabel="#{_var}" itemValue="#{_var.descripcion}"
														placeholder="Escriba el estado civil" maxResults="10"
														dropdown="true">
														<p:ajax event="itemSelect" update="estadoCivil"
															listener="#{pacienteController.onRowSelectEstadoCivilClick}" />
														<p:column>
															<h:outputText value="#{_var.descripcion}" />
														</p:column>
													</p:autoComplete>
													<p:message for="estadoCivil" display="tooltip" />
												</div>
											</div>

											<div class="Container33 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="grupoSanguineo" value="Grupo Sanguineo" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:autoComplete id="grupoSanguineo"
														value="#{pacienteController.nombreGrupoSanguineo}"
														completeMethod="#{pacienteController.onCompleteGrupoSanguineo}"
														minQueryLength="1" forceSelection="true" var="_var"
														itemLabel="#{_var}" itemValue="#{_var.descripcion}"
														placeholder="Escriba Grupo Sanguineo" maxResults="10"
														dropdown="true">
														<p:ajax event="itemSelect" update="grupoSanguineo"
															listener="#{pacienteController.onRowSelectGrupoSanguineoClick}" />
														<p:column>
															<h:outputText value="#{_var.descripcion}" />
														</p:column>
													</p:autoComplete>
													<p:message for="grupoSanguineo" display="tooltip" />
												</div>
											</div>

											<div class="Container33 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="raza" value="Raza" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:autoComplete id="raza"
														value="#{pacienteController.nombreRaza}"
														completeMethod="#{pacienteController.onCompleteRaza}"
														minQueryLength="1" forceSelection="true" var="_var"
														itemLabel="#{_var}" itemValue="#{_var.nombre}"
														placeholder="Escriba Raza" maxResults="10" dropdown="true">
														<p:ajax event="itemSelect" update="raza"
															listener="#{pacienteController.onRowSelectRazaClick}" />
														<p:column>
															<h:outputText value="#{_var.nombre}" />
														</p:column>
													</p:autoComplete>
													<p:message for="raza" display="tooltip" />
												</div>
											</div>

											<div class="Container33 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="documentoIdentidad"
														value="Documento de Identificación" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:autoComplete id="documentoIdentidad" required="true"
														requiredMessage="Debe ingresar al menos un documento de identidad del paciente por favor."
														value="#{pacienteController.documentoIdentidad}"
														converter="documentoIdentidadConverter"
														completeMethod="#{pacienteController.onCompleteDocumentoIdentidad}"
														minQueryLength="1" forceSelection="true" var="_var"
														itemLabel="#{_var.nombre}" itemValue="#{_var}"
														placeholder="Escriba Docuemto de Identificación"
														maxResults="10" dropdown="true">
														<p:ajax event="itemSelect"
															update="documentoIdentidad, documentos"
															listener="#{pacienteController.onRowSelectDocumentoIdentidadClick}" />
														<p:column>
															<h:outputText value="#{_var.nombre}" />
														</p:column>
													</p:autoComplete>
													<p:message for="telefono" display="tooltip" />
												</div>
											</div>

											<div class="Container100 Responsive100 ui-fluid TexAlLeft">
												<div class="Card">
													<div class="CardBigTopic">Listado de Documentos de
														Identidad</div>
													<div class="SeparatorFull"></div>
													<div class="Container100 ui-fluid">
														<p:dataTable id="documentos" var="car"
															value="#{pacienteController.listaIdentificacionIndividuo}"
															editable="true" style="margin-bottom:20px" reflow="true">

															<p:ajax event="rowEdit" immediate="true"
																listener="#{pacienteController.onRowEditDI(car)}"
																update="documentos, form001:growl" />
															<p:ajax event="rowEditCancel" immediate="true"
																listener="#{pacienteController.onRowDeleteDI(car)}"
																update="documentos" />

															<p:column headerText="Documento de Identidad" width="30%">
																<h:outputText value="#{car.documentoIdentidad.nombre}" />
															</p:column>

															<p:column headerText="Abreviatura" width="20%">
																<h:outputText value="#{car.documentoIdentidad.sigla}" />
															</p:column>

															<p:column headerText="Numero de Documento" width="20%">
																<p:cellEditor>
																	<f:facet name="output">
																		<h:outputText value="#{car.descripcion}" />
																	</f:facet>
																	<f:facet name="input">
																		<p:inputText value="#{car.descripcion}"
																			style="width:100%" label="Year" />
																	</f:facet>
																</p:cellEditor>
															</p:column>

															<p:column width="5%">
																<p:rowEditor />
															</p:column>

															<p:column width="5%">
																<p:commandButton type="button" icon="fa fa-trash-o"
																	styleClass="Fs14 White RedButton">
																	<p:ajax update="documentos"
																		listener="#{pacienteController.onRowDeleteDocumento(car)}" />
																</p:commandButton>
															</p:column>

														</p:dataTable>

													</div>

												</div>
											</div>

											<div class="Container33 Responsive100 ui-fluid TexAlLeft">

												<div class="Container30 Responsive50">
													<p:outputLabel value="Foto de Perfil:" />
												</div>
												<div class="Container70 Responsive50">
													<p:graphicImage id="fImageId"
														value="#{dynamicResourceController.streamedContentImage}"
														cache="false" width="150" height="150">
														<f:param name="param"
															value="#{pacienteController.paciente.id}" />
													</p:graphicImage>
													<p:fileUpload uploadLabel="Subir" cancelLabel="Cancelar"
														fileUploadListener="#{dynamicResourceController.handleFileUpload}"
														label="Subir" mode="advanced" skinSimple="true"
														update="messages,fImageId" sizeLimit="10000000000"
														auto="true" allowTypes="/(\.|\/)(gif|jpe?g|zip|png)$/" />

													<p:growl id="messages" showDetail="true" />
												</div>
											</div>

										</p:panel>
									</div>

									<div class="Container100 Responsive100 TexAlLeft">
										<p:panel header="Datos Demograficos" toggleable="true"
											collapsed="true">

											<div class="Container50 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80">
													<p:outputLabel for="pais" value="Pais" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:autoComplete id="pais"
														value="#{pacienteController.nombrePais}"
														completeMethod="#{pacienteController.onCompletePais}"
														minQueryLength="1" forceSelection="true" var="_var"
														itemLabel="#{_var}" itemValue="#{_var.nombre}"
														placeholder="Escriba Pais" maxResults="10" dropdown="true">
														<p:ajax event="itemSelect" update="pais,departamento"
															listener="#{pacienteController.onRowSelectPaisClick}" />
														<p:column>
															<h:outputText value="#{_var.nombre}" />
														</p:column>
													</p:autoComplete>
												</div>
											</div>

											<div class="Container50 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80">
													<p:outputLabel for="departamento" value="Departamento" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:autoComplete id="departamento"
														value="#{pacienteController.nombreDepartamento}"
														completeMethod="#{pacienteController.onCompleteDepartamento}"
														minQueryLength="1" forceSelection="true" var="_var"
														itemLabel="#{_var}" itemValue="#{_var.nombre}"
														placeholder="Escriba Departamento" maxResults="10"
														dropdown="true">
														<p:ajax event="itemSelect"
															update="departamento, provincia"
															listener="#{pacienteController.onRowSelectDepartamentoClick}" />
														<p:column>
															<h:outputText value="#{_var.nombre}" />
														</p:column>
													</p:autoComplete>
												</div>
											</div>

											<div class="Container50 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80">
													<p:outputLabel for="provincia" value="Provincia" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:autoComplete id="provincia"
														value="#{pacienteController.nombreProvincia}"
														completeMethod="#{pacienteController.onCompleteProvincia}"
														minQueryLength="1" forceSelection="true" var="_var"
														itemLabel="#{_var}" itemValue="#{_var.nombre}"
														placeholder="Escriba Provincia" maxResults="10"
														dropdown="true">
														<p:ajax event="itemSelect" update="provincia"
															listener="#{pacienteController.onRowSelectProvinciaClick}" />
														<p:column>
															<h:outputText value="#{_var.nombre}" />
														</p:column>
													</p:autoComplete>
												</div>
											</div>

											<div class="Container50 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80">
													<p:outputLabel for="barrio" value="Barrio:" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:autoComplete id="barrio"
														value="#{pacienteController.nombreBarrio}"
														completeMethod="#{pacienteController.onCompleteBarrio}"
														minQueryLength="1" forceSelection="true" var="_var"
														itemLabel="#{_var}" itemValue="#{_var.nombre}"
														placeholder="Escriba Barrio" maxResults="10"
														dropdown="true">
														<p:ajax event="itemSelect" update="barrio"
															listener="#{pacienteController.onRowSelectBarrioClick}" />
														<p:column>
															<h:outputText value="#{_var.nombre}" />
														</p:column>
													</p:autoComplete>
												</div>
											</div>

											<div class="Container50 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80">
													<p:outputLabel for="unidadVecinal" value="Unidad Vecinal:" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:autoComplete id="unidadVecinal"
														value="#{pacienteController.numeroUV}"
														completeMethod="#{pacienteController.onCompleteUnidadVecinal}"
														minQueryLength="1" forceSelection="true" var="_var"
														itemLabel="#{_var}" itemValue="#{_var.numero}"
														placeholder="Escriba Unidad Vecinal" maxResults="10"
														dropdown="true">
														<p:ajax event="itemSelect" update="unidadVecinal"
															listener="#{pacienteController.onRowSelectUnidadVecinalClick}" />
														<p:column>
															<h:outputText value="#{_var.numero}" />
														</p:column>
													</p:autoComplete>
												</div>
											</div>

											<div class="Container50 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="direccion" value="Dirección" />
												</div>
												<div class="Container70 Responsive50 TexAlRight">
													<p:inputText id="direccion" required="false"
														value="#{pacienteController.paciente.direccion}">
														<p:ajax event="change" />
													</p:inputText>
													<p:message for="direccion" display="tooltip" />
												</div>
											</div>

										</p:panel>
									</div>

									<div class="Container100 Responsive100 TexAlLeft">
										<p:panel header="Datos Laborales" toggleable="true"
											collapsed="true">

											<div class="Container60 Responsive100 ui-fluid TexAlLeft">
												<div class="Container30 Responsive100 TexAlLeft">
													<p:outputLabel for="cargoTrabajo" value="Cargo:" />
												</div>
												<div class="Container40 Responsive100 TexAlLeft">
													<p:autoComplete id="cargoTrabajo"
														value="#{pacienteController.paciente.cargo}"
														completeMethod="#{pacienteController.onCompleteCargoTrabajo}"
														converter="cargoTrabajoConverter" minQueryLength="1"
														forceSelection="true" var="_var"
														itemLabel="#{_var.descripcion} - #{_var.empresaTrabajo.descripcion}"
														itemValue="#{_var}" placeholder="Escriba el cargo"
														maxResults="10" dropdown="true">
														<p:ajax event="itemSelect" immediate="true" update="cargo"
															listener="#{pacienteController.onSelectCargoTrabajo}" />
														<p:column>
															<h:outputText
																value="#{_var.descripcion} - #{_var.empresaTrabajo.descripcion}" />
														</p:column>
													</p:autoComplete>
													<p:message for="cargoTrabajo" display="tooltip" />
												</div>
											</div>

										</p:panel>
									</div>

									<div class="Container100 Responsive100 TexAlLeft">
										<p:panel header="Datos de Empresa" toggleable="true"
											collapsed="#{pacienteController.paciente.tipoAfiliacion != 'E'}"
											rendered="#{pacienteController.paciente.tipoAfiliacion == 'E' or pacienteController.paciente.tipoAfiliacion == 'S'}">

											<div class="Container60 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container30 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="cargo" value="Empresa:" />
												</div>
												<div class="Container50 Responsive50 TexAlRight">
													<p:autoComplete id="cargo" converter="companiaConverter"
														value="#{pacienteController.empresa}"
														completeMethod="#{pacienteController.onCompleteEmpresas}"
														minQueryLength="1" forceSelection="true" var="_var"
														itemLabel="#{_var.descripcion}" itemValue="#{_var}"
														placeholder="Escriba la empresa" maxResults="10"
														dropdown="true">
														<p:ajax event="itemSelect"
															update="cargo, empresasT, growl"
															listener="#{pacienteController.onRowSelectEmpresasClick}" />
														<p:column>
															<h:outputText value="#{_var.descripcion}" />
														</p:column>
													</p:autoComplete>
													<p:message for="cargo" display="tooltip" />
												</div>
											</div>

											<div class="Container60 Responsive100 ui-fluid TexAlLeft">
												<div class="Card">
													<div class="CardBigTopic">Listado de Empresas</div>
													<div class="SeparatorFull"></div>
													<div class="Container100 ui-fluid">
														<p:dataTable id="empresasT" var="car"
															value="#{pacienteController.empresas}" reflow="true">

															<p:column headerText="Nombre" width="30%">
																<h:outputText value="#{car.empresa.descripcion}" />
															</p:column>

															<p:column width="5%">
																<p:commandButton type="button" icon="fa fa-trash-o"
																	styleClass="Fs14 White RedButton">
																	<p:ajax update="empresasT"
																		listener="#{pacienteController.onRowDeleteEmpresas(car)}" />
																</p:commandButton>
															</p:column>

														</p:dataTable>

													</div>

												</div>
											</div>

										</p:panel>
									</div>

									<div class="Container100 Responsive100 TexAlLeft">
										<p:panel header="Datos del Seguro" toggleable="true"
											collapsed="#{pacienteController.paciente.tipoAfiliacion != 'S'}"
											rendered="#{pacienteController.paciente.tipoAfiliacion == 'E' or pacienteController.paciente.tipoAfiliacion == 'S'}">

											<div class="Container60 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container0 Responsive50 FontLatoBold Fs14 Black Opac80">
													<p:outputLabel for="titular" value="" />
												</div>
												<div class="Container70 Responsive50">
													<p:selectOneRadio id="titular" immediate="true"
														value="#{pacienteController.paciente.titular}">
														<p:ajax render="datosSeguro" update="titular, form001" />
														<f:selectItem itemLabel="Titular" itemValue="T" />
														<f:selectItem itemLabel="Conyugue" itemValue="C" />
														<f:selectItem itemLabel="Dependiente" itemValue="D" />
													</p:selectOneRadio>
													<p:message for="titular" display="tooltip" />
												</div>
											</div>

											<div class="Container80 Responsive100 ui-fluid TexAlLeft">
												<h:form id="datosSeguro"
													rendered="#{pacienteController.paciente.titular != 'T'}">
													<p:panel
														rendered="#{pacienteController.paciente.titular != 'T'}">

														<div class="Container80 Responsive100 ui-fluid TexAlLeft">
															<div
																class="Container20 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
																<p:outputLabel for="grupoFamiliar"
																	value="Grupo Familiar:" />
															</div>
															<div class="Container60 Responsive50 TexAlRight">
																<p:autoComplete id="grupoFamiliar"
																	value="#{pacienteController.nombreGrupoFamiliar}"
																	completeMethod="#{pacienteController.onCompleteGrupoFamiliar}"
																	minQueryLength="1" forceSelection="true" var="_var"
																	itemLabel="#{_var}" itemValue="#{_var.nombre}"
																	placeholder="Escriba el Grupo Familiar" maxResults="10"
																	dropdown="true">
																	<p:ajax event="itemSelect"
																		update="grupoFamiliar, form001:cars1"
																		listener="#{pacienteController.onRowSelectGrupoFamiliarClick}" />
																	<p:column>
																		<h:outputText value="#{_var.nombre}" />
																	</p:column>
																</p:autoComplete>
																<p:message for="grupoFamiliar" display="tooltip" />
															</div>
														</div>

														<div class="Container80 Responsive100 ui-fluid TexAlLeft">
															<div
																class="Container20 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
																<p:outputLabel for="parentesco" value="Parentesco:" />
															</div>
															<div class="Container60 Responsive50 TexAlRight">
																<p:autoComplete id="parentesco"
																	value="#{pacienteController.nombreParentesco}"
																	completeMethod="#{pacienteController.onCompleteParentesco}"
																	minQueryLength="1" forceSelection="true" var="_var"
																	itemLabel="#{_var}" itemValue="#{_var.descripcion}"
																	placeholder="Escriba el Parentesco" maxResults="10"
																	dropdown="true">
																	<p:ajax event="itemSelect" update="parentesco"
																		listener="#{pacienteController.onRowSelectParentescoClick}" />
																	<p:column>
																		<h:outputText value="#{_var.descripcion}" />
																	</p:column>
																</p:autoComplete>
																<p:message for="parentesco" display="tooltip" />
															</div>
														</div>
													</p:panel>
												</h:form>

											</div>

											<div class="Container80 Responsive100 ui-fluid TexAlLeft">
												<div
													class="Container20 Responsive50 FontLatoBold Fs14 Black Opac80 TexAlLeft">
													<p:outputLabel for="seguro" value="Seguro:"
														rendered="#{pacienteController.paciente.titular == 'T'}" />
												</div>
												<div class="Container60 Responsive50 TexAlRight">
													<p:autoComplete id="seguro"
														rendered="#{pacienteController.paciente.titular == 'T'}"
														value="#{pacienteController.planSeguro.descripcion}"
														completeMethod="#{pacienteController.onCompleteSeguro}"
														minQueryLength="1" forceSelection="true" var="_var"
														itemLabel="#{_var}"
														itemValue="#{_var.seguro.nombre} - #{_var.descripcion}"
														placeholder="Escriba el Seguro" maxResults="10"
														dropdown="true">
														<p:ajax event="itemSelect" update="seguro, cars1"
															listener="#{pacienteController.onRowSelectSeguroClick}" />
														<p:column>
															<h:outputText
																value="#{_var.seguro.nombre} - #{_var.descripcion}" />
														</p:column>
													</p:autoComplete>
													<p:message for="seguro" display="tooltip" />
												</div>
											</div>

											<div class="Container100 Responsive100 Flex">
												<div class="Card">
													<div class="CardBigTopic">Listado de seguros</div>
													<div class="SeparatorFull"></div>
													<div class="Container100 ui-fluid">
														<p:dataTable id="cars1" var="car"
															value="#{pacienteController.listaPlanesSeguros}"
															editable="true" style="margin-bottom:20px" reflow="true">

															<p:ajax event="rowEdit" immediate="true"
																listener="#{pacienteController.onRowEditSeguro(car)}"
																update="cars1" />
															<p:ajax event="rowEditCancel" immediate="true"
																listener="#{pacienteController.onRowDelete(car)}"
																update="cars1" />

															<p:column headerText="Nombre de Seguro">
																<h:outputText value="#{car.planSeguro.seguro.nombre}" />
															</p:column>

															<p:column headerText="Codigo de Asegurado">
																<p:cellEditor>
																	<f:facet name="output">
																		<h:outputText value="#{car.codigoAsegurado}" />
																	</f:facet>
																	<f:facet name="input">
																		<p:inputText value="#{car.codigoAsegurado}"
																			style="width:100%" label="Year" />
																	</f:facet>
																</p:cellEditor>
															</p:column>

															<p:column headerText="Plan de Seguro">
																<h:outputText value="#{car.planSeguro.descripcion}" />
															</p:column>

															<p:column style="width:32px">
																<p:rowEditor />
															</p:column>

															<p:column style="width:70px">
																<p:commandButton type="button" icon="fa fa-trash-o"
																	styleClass="Fs14 White RedButton">
																	<p:ajax update="cars1"
																		listener="#{pacienteController.onRowDeleteSeguro(car)}" />
																</p:commandButton>
															</p:column>

														</p:dataTable>

													</div>

												</div>

											</div>

										</p:panel>
									</div>

								</div>

							</div>

						</div>

					</div>

				</ui:fragment>

				<ui:fragment rendered="#{pacienteController.crear}">

					<div class="Container100 Responsive100 Flex">

						<div class="Card">
							<div class="CardBigTopic">LISTADO DE PACIENTES</div>
							<div class="SeparatorFull"></div>
							<div class="Container100 ui-fluid">
								<p:dataTable id="singleDT" var="var"
									value="#{pacienteController.vistaPacientes}"
									selectionMode="single"
									selection="#{pacienteController.vistaPaciente}"
									rowKey="#{var.paciente.id}" rows="10" paginator="true"
									paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
									rowsPerPageTemplate="5,10,15"
									emptyMessage="No se encontraron registros." reflow="true">
									<f:facet name="header">
                            			Seleccione un paciente para ver su detalle
                        			</f:facet>

									<p:column width="4%">
										<p:rowToggler />
									</p:column>

									<p:ajax update="form001" event="rowSelect"
										listener="#{pacienteController.onRowSelect}" />

									<p:column width="10%" headerText="Foto">
										<p:graphicImage id="img" value="#{pacienteController.content}"
											cache="false" width="20" height="20">
											<f:param name="param" value="#{var.paciente.id}" />
										</p:graphicImage>
										<p:overlayPanel id="imgPanel" for="img" showEffect="slide"
											hideEffect="explode" showEvent="mouseover"
											hideEvent="mouseout" dismissable="true" showCloseIcon="false">
											<p:imageSwitch effect="fade"
												style="width:200px;height:150px;">
												<p:graphicImage value="#{pacienteController.content}"
													cache="false" width="200" height="150px">
													<f:param name="param" value="#{var.paciente.id}" />
												</p:graphicImage>
											</p:imageSwitch>
										</p:overlayPanel>
									</p:column>

									<p:column width="25%"
										filterBy="#{var.paciente.nombre} #{var.paciente.apellidoPaterno} #{var.paciente.apellidoMaterno}">
										<f:facet name="header">
											<h:outputText value="Nombre Completo" />
										</f:facet>
										<h:outputText
											value="#{var.paciente.nombre} #{var.paciente.apellidoPaterno} #{var.paciente.apellidoMaterno}" />
									</p:column>

									<p:column width="25%" style="text-align:center;"
										filterBy="#{var.documentoIdentidad.descripcion}">
										<f:facet name="header">
											<h:outputText value="Documento de Identidad" />
										</f:facet>
										<h:outputText
											value="#{var.documentoIdentidad.documentoIdentidad.nombre} - #{var.documentoIdentidad.descripcion}" />
									</p:column>

									<p:column width="12%" style="text-align:center;"
										filterBy="#{var.paciente.telefono}">
										<f:facet name="header">
											<h:outputText value="Telefonos" />
										</f:facet>
										<h:outputText value="#{var.paciente.telefono}" />
									</p:column>
									<p:column width="12%" headerText="Empresa"
										filterBy="#{var.paciente.cargo.empresaTrabajo.descripcion} - #{var.paciente.cargo.descripcion}">
										<f:facet name="header">
											<h:outputText value="Empresa" />
										</f:facet>
										<h:outputText
											value="#{var.paciente.cargo.empresaTrabajo.descripcion} - #{var.paciente.cargo.descripcion}" />
									</p:column>
									<p:column width="12%" filterBy="#{var.paciente.tipoAfiliacion}"
										style="text-align:center;">
										<f:facet name="header">
											<h:outputText value="Tipo de Afiliacion" />
										</f:facet>
										<span style="color: red"><h:outputText
												rendered="#{var.paciente.tipoAfiliacion == 'P'}"
												value="Particular" /></span>
										<span style="color: green"><h:outputText
												rendered="#{var.paciente.tipoAfiliacion == 'S'}"
												value="Asegurado" /></span>
										<span style="color: orange"><h:outputText
												rendered="#{var.paciente.tipoAfiliacion == 'E'}"
												value="Empresa" /></span>
									</p:column>
									<p:column width="12%" style="text-align:center;"
										filterBy="#{var.paciente.fechaRegistro}">
										<f:facet name="header">
											<h:outputText value="Fecha Registro" />
										</f:facet>
										<h:outputText value="#{var.paciente.fechaRegistro}">
											<f:convertDateTime pattern="dd/MM/yyyy" />
										</h:outputText>
									</p:column>

									<p:rowExpansion>

										<p:dataTable var="item" value="#{var.seguros}" reflow="true"
											paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
											rowsPerPageTemplate="5,10,15">

											<f:facet name="header">
												Seguros del Paciente
											</f:facet>

											<p:column>
												<f:facet name="header">
													<h:outputText value="Seguro" />
												</f:facet>
												<h:outputText value="#{item.planSeguro.seguro.nombre}" />
											</p:column>

											<p:column>
												<f:facet name="header">
													<h:outputText value="Plan" />
												</f:facet>
												<h:outputText value="#{item.planSeguro.descripcion}" />
											</p:column>

											<p:column>
												<f:facet name="header">
													<h:outputText value="Codigo de Asegurado" />
												</f:facet>
												<h:outputText value="#{item.codigoAsegurado}" />
											</p:column>

										</p:dataTable>

									</p:rowExpansion>

									<f:facet name="footer">
										<h:outputText
											value="#{pacienteController.listaIndividuo.size()} Registros en Total" />
									</f:facet>
								</p:dataTable>
							</div>
						</div>
					</div>
				</ui:fragment>
			</div>
			<p:growl id="growl" showDetail="true" />
		</h:form>

	</ui:define>

</ui:composition>